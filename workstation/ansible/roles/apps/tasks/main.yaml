- name: Install Brave Key
  apt_key:
    url: 'https://brave-browser-apt-release.s3.brave.com/brave-browser-archive-keyring.gpg'
    keyring: /usr/share/keyrings/brave-browser-archive-keyring.gpg
    state: present
- name: Install Brave Repository
  apt_repository:
    repo: 'deb [arch=amd64 signed-by=/usr/share/keyrings/brave-browser-archive-keyring.gpg] https://brave-browser-apt-release.s3.brave.com/ stable main'
    state: present
    filename: brave
- name: Install Brave
  apt:
    name: brave-browser

- name: Install OnlyOffice
  apt:
    deb: https://download.onlyoffice.com/install/desktop/editors/linux/onlyoffice-desktopeditors_amd64.deb

- name: Install Bitwarden
  apt:
    deb: https://github.com/bitwarden/clients/releases/download/desktop-v2023.2.0/Bitwarden-2023.2.0-amd64.deb

- name: Add repo PPA Eve-Integration
  ansible.builtin.apt_repository:
    repo: 'ppa:smartfinn/eve-ng-integration'
    codename: '{{ ansible_distribution_release }}'

- name: Install Eve-Integration
  apt:
    name: eve-ng-integration

- name: Enable 32 bit packages
  command: dpkg --add-architecture i386

- name: Add WineHQ GPG repostiory key
  apt_key:
    url: https://dl.winehq.org/wine-builds/winehq.key
    keyring: /etc/apt/trusted.gpg.d/winehq.gpg

- name: Add WineHQ repository
  apt_repository:
    repo: deb https://dl.winehq.org/wine-builds/{{ ansible_distribution | lower }}/ {{ ansible_distribution_release }} main
    register: wine_winehq_repo_debian

- name: Update the Apt cache
  apt:
    update_cache: yes
    when: wine_winehq_repo_debian.changed

- name: Install winehq packages
  apt:
    name: winehq-stable
    state: present
    update_cache: yes
    install_recommends: yes